openapi: 3.0.0
info:
  title: Sourcify API
  version: 1.0.0
servers:
- description: The current REST API server
  url: ''
- description: The production REST API server
  url: https://server-verify.hashscan.io
- description: The staging REST API server
  url: https://server-sourcify.hedera-devops.com
- description: Local development server address on default port 5555
  url: http://localhost:5555
tags:
- name: Stateless Verification
  description: Main verification endpoints
paths:
  /verify:
    post:
      description: 'Sends provided files for verification

        '
      tags:
      - Stateless Verification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - address
              - chain
              - files
              properties:
                address:
                  type: string
                  format: address
                chain:
                  type: string
                  format: supported-chainId
                files:
                  type: object
                creatorTxHash:
                  type: string
                chosenContract:
                  type: string
          multipart/form-data:
            schema:
              type: object
              required:
              - address
              - chain
              properties:
                address:
                  type: string
                  format: address
                chain:
                  type: string
                  format: supported-chainId
                files:
                  description: This field is required
                  oneOf:
                  - type: string
                  - type: array
                    items:
                      type: string
                  - type: string
                    format: binary
                  - type: array
                    items:
                      type: string
                      format: binary
                creatorTxHash:
                  type: string
                chosenContract:
                  type: string
      responses:
        '200':
          description: The contract has been successfully checked or sourcified
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: array
                    items:
                      type: object
                      properties:
                        address:
                          type: string
                        chainId:
                          type: string
                        status:
                          type: string
                        message:
                          type: string
                        libraryMap:
                          type: object
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /verify/etherscan:
    post:
      summary: Verify an Etherscan verified contract
      tags:
      - Stateless Verification
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                address:
                  type: string
                  format: address
                chainId:
                  type: string
                  format: supported-chainId
                apiKey:
                  type: string
              required:
              - address
              - chainId
          multipart/form-data:
            schema:
              type: object
              properties:
                address:
                  type: string
                  format: address
                chain:
                  type: string
                  format: supported-chainId
                apiKey:
                  type: string
              required:
              - address
              - chain
      responses:
        '200':
          description: The contract has been successfully checked or sourcified
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: array
                    items:
                      type: object
                      properties:
                        address:
                          type: string
                        chainId:
                          type: string
                        status:
                          type: string
                        message:
                          type: string
                        libraryMap:
                          type: object
        '429':
          description: Too Many Requests sent through Sourcify's own API key
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /verify/solc-json:
    post:
      summary: Verify solc-json
      tags:
      - Stateless Verification
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                address:
                  type: string
                  format: address
                  description: Contract address
                chain:
                  type: string
                  format: supported-chainId
                  description: Chain to check
                files:
                  type: object
                  additionalProperties:
                    type: string
                  description: 'Files to upload {"path/filename": "content"}'
                compilerVersion:
                  type: string
                  description: Compiler version
                contractName:
                  type: string
                  description: Name of the contract
                creatorTxHash:
                  type: string
                  description: Creator transaction hash
              required:
              - address
              - chain
              - compilerVersion
              - contractName
              - files
          multipart/form-data:
            schema:
              type: object
              properties:
                address:
                  type: string
                  format: address
                  description: Contract address
                chain:
                  type: string
                  format: supported-chainId
                  description: Chain to check
                files:
                  oneOf:
                  - type: string
                    format: binary
                  - type: array
                    items:
                      type: string
                      format: binary
                  description: File content for upload
                compilerVersion:
                  type: string
                  description: Compiler version
                contractName:
                  type: string
                  description: Name of the contract
                creatorTxHash:
                  type: string
                  description: Creator transaction hash
              required:
              - address
              - chain
              - compilerVersion
              - contractName
      responses:
        '200':
          description: The contract has been successfully checked or sourcified
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: array
                    items:
                      type: object
                      properties:
                        address:
                          type: string
                        chainId:
                          type: string
                        status:
                          type: string
                        message:
                          type: string
                        libraryMap:
                          type: object
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /check-all-by-addresses:
    get:
      summary: Check if contracts are verified (full or partial match) by addresses
        and chain IDs
      description: Checks if contract with the desired chain and address is verified
        and in the repository. It will search for both perfect and partial matches.
      tags:
      - Repository
      parameters:
      - name: addresses
        in: query
        description: Comma seperated string of addresses to check for.
        required: true
        schema:
          type: string
          format: comma-separated-addresses
      - name: chainIds
        in: query
        description: Comma separated string of chain IDs.
        required: true
        schema:
          type: string
          format: comma-separated-sourcify-chainIds
        allowReserved: true
      responses:
        '200':
          description: OK. Also returns `200` with status `false` when not found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    address:
                      type: string
                    chainIds:
                      type: array
                      items:
                        type: object
                        properties:
                          chainId:
                            type: string
                          status:
                            type: string
  /check-by-addresses:
    get:
      summary: Check if contracts are verified (full match) by addresses and chain
        IDs
      description: Checks if contract with the desired chain and address is verified
        and in the repository. It will search only the perfect matches.
      tags:
      - Repository
      parameters:
      - name: addresses
        in: query
        description: The addresses of the contracts.
        required: true
        schema:
          type: string
          format: comma-separated-addresses
      - name: chainIds
        in: query
        description: The IDs of the chains.
        required: true
        schema:
          type: string
          format: comma-separated-sourcify-chainIds
        allowReserved: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    address:
                      type: string
                    status:
                      type: string
                    chainIds:
                      type: array
                      items:
                        type: string
  /files/any/{chain}/{address}:
    get:
      summary: Get all files of a contract (full and partial match)
      description: Returns all files for the desired contract with the address and
        chain. Searches both full and partial matches.
      tags:
      - Repository
      parameters:
      - name: chain
        in: path
        required: true
        schema:
          type: string
          format: sourcify-chainId
      - name: address
        in: path
        required: true
        schema:
          type: string
          format: address
      responses:
        '200':
          description: Contract is available
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  files:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        path:
                          type: string
                        content:
                          type: string
        '404':
          description: Contract is not available
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /files/{chain}/{address}:
    get:
      summary: Get all files of a contract (full match)
      description: Returns all files for the desired contract with the address and
        chain. Searches only for full matches.
      tags:
      - Repository
      parameters:
      - name: chain
        in: path
        required: true
        schema:
          type: string
          format: sourcify-chainId
      - name: address
        in: path
        required: true
        schema:
          type: string
          format: address
      responses:
        '200':
          description: Contract is available in the repository
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    path:
                      type: string
                    content:
                      type: string
        '404':
          description: Contract is not available in the repository
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /repository/contracts/{matchType}/{chain}/{address}/{filePath}:  
    get:
      summary: Get a specific file from the repository with the file path (static
        serving)
      description: Retrieve statically served files over the server.
      tags:
      - Repository
      parameters:
      - name: matchType
        description: Match type - use `full_match` or `partial_match`
        in: path
        required: true
        schema:
          type: string
          format: match-type
      - name: chain
        in: path
        required: true
        schema:
          type: string
          format: sourcify-chainId
      - name: address
        in: path
        required: true
        schema:
          type: string
          format: address
      - name: filePath
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: The file is found at the path
          content:
            text/plain: {}
        '404':
          description: The file is not found at the path
          content:
            text/plain: {}
  /files/contracts/{chain}:
    get:
      summary: Get all contract addresses verified on a chain (full or partial match)
      description: Returns all verified contracts from the repository for the desired
        chain. Searches for full and partial matches.
      tags:
      - Repository
      parameters:
      - name: chain
        in: path
        required: true
        schema:
          type: string
          format: sourcify-chainId
      responses:
        '200':
          description: Chain is available as a full match or partial match in the
            repository
          content:
            application/json:
              schema:
                type: object
                properties:
                  full:
                    type: array
                    items:
                      type: string
                  partial:
                    type: array
                    items:
                      type: string
        '404':
          description: Chain is not available as both full match or partial match
            in the repository
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /files/tree/any/{chain}/{address}:
    get:
      summary: Get file tree (full and partial match)
      description: Returns repository URLs for every file in the source tree for the
        desired chain and address. Searches for full and partial matches.
      tags:
      - Repository
      parameters:
      - name: chain
        in: path
        required: true
        schema:
          type: string
          format: sourcify-chainId
      - name: address
        in: path
        required: true
        schema:
          type: string
          format: address
      responses:
        '200':
          description: Contract is available
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  files:
                    type: array
                    items:
                      type: string
        '404':
          description: Contract is not available
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /files/tree/{chain}/{address}:
    get:
      summary: Get file tree (full match)
      description: Returns repository URLs for every file in the source tree for the
        desired chain and address. Searches only for full matches.
      tags:
      - Repository
      parameters:
      - name: chain
        in: path
        required: true
        schema:
          type: string
          format: sourcify-chainId
      - name: address
        in: path
        required: true
        schema:
          type: string
          format: address
      responses:
        '200':
          description: Contract is available
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        '404':
          description: Contract is not available
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /session/data:
    get:
      summary: Get session data
      tags:
      - Session Verification
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      type: object
                      properties:
                        verificationId:
                          type: string
                        compiledPath:
                          type: string
                        name:
                          type: string
                        compilerVersion:
                          type: string
                        files:
                          type: object
                          properties:
                            found:
                              type: array
                              items:
                                type: string
                            missing:
                              type: array
                              items:
                                type: string
                        status:
                          type: string
                  unused:
                    type: array
                    items:
                      type: string
  /session/clear:
    post:
      summary: Clear session data
      tags:
      - Session Verification
      responses:
        '200':
          description: OK
          content:
            text/plain:
              schema:
                type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /session/input-files:
    post:
      summary: Add input files
      tags:
      - Session Verification
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                files:
                  type: object
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  description: This field is required
                  oneOf:
                  - type: string
                  - type: array
                    items:
                      type: string
                  - type: string
                    format: binary
                  - type: array
                    items:
                      type: string
                      format: binary
      parameters:
      - name: url
        in: query
        schema:
          type: string
          format: uri
        description: Remote file URL
        required: false
      - name: dryrun
        in: query
        schema:
          type: boolean
          default: false
        description: Dry-run flag. When present and set to true, a successful verification
          result will not be stored in the repository.
        required: false
      responses:
        '200':
          description: Response is sent when the upload is successful under different
            conditions.
          content:
            application/json:
              schema:
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      type: object
                      properties:
                        compiledPath:
                          type: string
                        name:
                          type: string
                        compilerVersion:
                          type: string
                        files:
                          type: object
                          properties:
                            found:
                              type: array
                              items:
                                type: string
                            missing:
                              type: array
                              items:
                                type: string
                        verificationId:
                          type: string
                        status:
                          type: string
                          enum:
                          - perfect
                          - partial
                          - error
                  unused:
                    type: array
                    items:
                      type: string
        '413':
          description: Payload Too Large
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /session/input-contract:
    post:
      summary: Import deployed contract trying to fetch metadata and files form IPFS
      tags:
      - Session Verification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - address
              - chainId
              properties:
                address:
                  type: string
                  format: address
                chainId:
                  type: string
                  format: supported-chainId
          multipart/form-data:
            schema:
              type: object
              required:
              - address
              - chainId
              properties:
                address:
                  type: string
                  format: address
                chainId:
                  type: string
                  format: supported-chainId
      responses:
        '200':
          description: Response is sent when the upload is successful under different
            conditions.
          content:
            application/json:
              schema:
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      type: object
                      properties:
                        compiledPath:
                          type: string
                        name:
                          type: string
                        compilerVersion:
                          type: string
                        files:
                          type: object
                          properties:
                            found:
                              type: array
                              items:
                                type: string
                            missing:
                              type: array
                              items:
                                type: string
                        verificationId:
                          type: string
                        status:
                          type: string
                          enum:
                          - perfect
                          - partial
                          - error
                  unused:
                    type: array
                    items:
                      type: string
        '413':
          description: Payload Too Large
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /session/verify-checked:
    post:
      summary: Verify checked contract in session
      tags:
      - Session Verification
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contracts:
                  type: array
                  items:
                    type: object
                    properties:
                      address:
                        type: string
                        format: address
                      chainId:
                        type: string
                        format: supported-chainId
                      creatorTxHash:
                        type: string
                        nullable: true
                      verificationId:
                        type: string
      parameters:
      - name: dryrun
        in: query
        schema:
          type: boolean
          default: false
        description: Dry-run flag. When present and set to true, a successful verification
          result will not be stored in the repository.
        required: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      type: object
                      properties:
                        verificationId:
                          type: string
                        compiledPath:
                          type: string
                        name:
                          type: string
                        compilerVersion:
                          type: string
                        address:
                          type: string
                        chainId:
                          type: string
                        files:
                          type: object
                          properties:
                            found:
                              type: array
                              items:
                                type: string
                            missing:
                              type: array
                              items:
                                type: string
                        status:
                          type: string
                        storageTimestamp:
                          type: string
                          format: date-time
                  unused:
                    type: array
                    items:
                      type: string
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /session/input-solc-json:
    post:
      summary: Verify solc-json
      tags:
      - Session Verification
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                files:
                  type: object
                  additionalProperties:
                    type: string
                  description: 'Files to upload {"path/filename": "content"}'
                compilerVersion:
                  type: string
                  description: Compiler version
              required:
              - compilerVersion
              - files
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  oneOf:
                  - type: string
                  - type: array
                    items:
                      type: string
                  - type: string
                    format: binary
                  - type: array
                    items:
                      type: string
                      format: binary
                compilerVersion:
                  type: string
                  description: Compiler version
              required:
              - compilerVersion
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      type: object
                      properties:
                        verificationId:
                          type: string
                        compiledPath:
                          type: string
                        name:
                          type: string
                        compilerVersion:
                          type: string
                        address:
                          type: string
                        chainId:
                          type: string
                        files:
                          type: object
                          properties:
                            found:
                              type: array
                              items:
                                type: string
                            missing:
                              type: array
                              items:
                                type: string
                        status:
                          type: string
                        storageTimestamp:
                          type: string
                          format: date-time
                  unused:
                    type: array
                    items:
                      type: string
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /session/verify/etherscan:
    post:
      summary: Verify from Etherscan
      tags:
      - Session Verification
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                address:
                  type: string
                  format: address
                chainId:
                  type: string
                  format: supported-chainId
                apiKey:
                  type: string
              required:
              - address
              - chainId
          multipart/form-data:
            schema:
              type: object
              required:
              - address
              - chain
              properties:
                address:
                  type: string
                  format: address
                chain:
                  type: string
                  format: supported-chainId
                apiKey:
                  type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      type: object
                      properties:
                        verificationId:
                          type: string
                        compiledPath:
                          type: string
                        name:
                          type: string
                        compilerVersion:
                          type: string
                        address:
                          type: string
                        chainId:
                          type: string
                        files:
                          type: object
                          properties:
                            found:
                              type: array
                              items:
                                type: string
                            missing:
                              type: array
                              items:
                                type: string
                        status:
                          type: string
                        storageTimestamp:
                          type: string
                          format: date-time
                  unused:
                    type: array
                    items:
                      type: string
        '429':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    oneOf:
                    - {}
                    - {}
  /change-log-level:
    post:
      summary: Change the logging level of the application
      description: Allows changing the logging level dynamically at runtime for the
        application. Requires Basic Authentication.
      tags:
      - Logging
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - level
              properties:
                level:
                  type: string
                  description: The new logging level to set.
                  enum:
                  - error
                  - warn
                  - info
                  - debug
                  - silly
      responses:
        '200':
          description: The logging level was successfully changed.
          content:
            text/plain:
              schema:
                type: string
        '400':
          description: Bad request (e.g., invalid logging level provided).
        '401':
          description: Unauthorized (missing or invalid Basic Authentication credentials).
